<?xml version="1.0" encoding="utf-8"?>
<!-- vim:fdn=3:
-->
<openerp>
    <data>


        <template t-name="mobile_frontend.base" name="Base layout">&lt;!DOCTYPE html&gt;
            <html>
                <head>
                    <title>Open-eObs</title>
                    <link t-att-href="urls['stylesheet']" rel="stylesheet" type="text/css"/>
                    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
                </head>
                <body>
                    <div class="header">
                        <div class="header-main block">
                            <img t-att-src="urls['logo']" class="logo"/>
                            <ul class="header-meta">
                                <li class="logout"><a t-att-href="urls['logout']" class="button back">Logout</a></li>
                            </ul>
                        </div>
                        <ul class="header-menu two-col">
                            <t t-if="section=='task'">
                                <li><a t-att-href="urls['task_list']" id="taskNavItem" class="selected">Tasks</a></li>
                                <li><a t-att-href="urls['patient_list']" id="patientNavItem">My Patients</a></li>
                            </t>
                            <t t-if="section=='patient'">
                                <li><a t-att-href="urls['task_list']" id="taskNavItem">Tasks</a></li>
                                <li><a t-att-href="urls['patient_list']" id="patientNavItem" class="selected">My Patients</a></li>
                            </t>
                        </ul>
                    </div>
                    <t t-raw="0"/>
                    <div class="footer block">
                        <p class="user"><t t-esc="username"/></p>
                    </div>
                </body>
            </html>
        </template>

        <template t-name="mobile_frontend.patient_task_list" name="List of Tasks or Patients">
            <t t-call="mobile_frontend.base">
                <div class="content">
                    <ul class="tasklist">
                        <li t-foreach="items" t-as="item">
                            <a t-att-href="item['url']" t-att-class="item['color']+' block'">
                                <div class="task-meta">
                                    <div class="task-right">
                                        <p class="aside"><t t-esc="item['deadline_time']"/></p>
                                    </div>
                                    <div class="task-left">
                                        <t t-if="'notification' in item and item['notification']==True">
                                            <i class="icon-alert"></i>
                                        </t>
                                        <strong><t t-esc="item['full_name']"/></strong> (<t t-esc="item['ews_score']"/> <i t-att-class="item['trend_icon']"></i>)<br/>
                                        <em><t t-esc="item['location']"/>,<t t-esc="item['parent_location']"/></em>
                                    </div>
                                </div>
                                <div class="task-meta">
                                    <p class="taskInfo"><t t-if="item['summary']"><t t-esc="item['summary']"/></t><br/></p>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </t>
        </template>

         <template name="Notification Confirm/Cancel Screen" t-name="mobile_frontend.notification_confirm_cancel">
             <t t-call="mobile_frontend.base">
                 <div class="content">
                     <h2 id="patientName" class="block">
                         <a t-att-href="patient['url']"><t t-esc="patient['name']"/><i class="icon-info"></i></a>
                     </h2>
                     <form t-att-action="form['confirm_url']" method="POST" t-att-task-id="form['task-id']" t-att-patient-id="form['patient-id']" id="obsForm" t-att-data-source="form['source']" t-att-class="'obsChange block' if form['type']=='frequency' else 'block'" t-att-data-type="form['type']">
                         <h3>Confirm action taken?</h3>
                         <p>Press the button below to confirm that you can completed the task <t t-esc="name"/></p>
                         <t t-if="len(inputs) > 0">
                            <div t-foreach="inputs" t-as="item">
                                <t t-if="item['type']=='selection'">
                                    <t t-call="mobile_frontend.observation_data_select"/>
                                </t>
                            </div>
                         </t>
                         <input type="hidden" name="taskId" t-att-value="form['task-id']"/>
                         <input type="hidden" name="startTimestamp" id="startTimestamp" t-att-value="form['start']"/>
                         <p class="obsSubmit">
                             <a t-att-href="form['confirm_url']" class="button submitButton" t-att-id="'obsFreqSubmit' if form['type']=='frequency' else 'confirmSubmit'">Confirm action</a>
                         </p>
                         <t t-if="cancellable==True">
                            <p class="obsConfirm">
                                <a t-att-href="form['cancel_url']" class="button cancelButton" id="cancelSubmit">Cancel action</a>
                            </p>
                         </t>
                     </form>
                     <script t-att-src="urls['jquery']" type="text/javascript"></script>
                     <script t-att-src="urls['js_routes']" type="text/javascript"></script>
                     <script t-att-src="urls['observation_form_validation']" type="text/javascript"></script>
                     <script t-att-src="urls['observation_form_js']" type="text/javascript"></script>
                 </div>
             </t>
        </template>

        <template name="Observation Data Entry Screen" t-name="mobile_frontend.observation_entry">
            <t t-call="mobile_frontend.base">
                <div class="content">
                    <h2 id="patientName" class="block">
                        <a t-att-href="patient['url']"><t t-esc="patient['name']"/><i class="icon-info"></i></a>
                    </h2>
                    <form t-att-action="form['action']" method="POST" t-att-data-type="form['type']" t-att-task-id="form['task-id']" t-att-patient-id="form['patient-id']" id="obsForm" t-att-data-source="form['source']">
                        <div t-foreach="inputs" t-as="item">
                            <t t-if="item['type']=='number'">
                                <t t-call="mobile_frontend.observation_data_input"/>
                            </t>
                            <t t-if="item['type']=='selection'">
                                <t t-call="mobile_frontend.observation_data_select"/>
                            </t>
                        </div>
                        <input type="hidden" name="taskId" t-att-value="form['task-id']"/>
                        <input type="hidden" name="startTimestamp" id="startTimestamp" t-att-value="form['start']"/>
                        <div class="block obsSubmit">
                            <input type="submit" value="Submit" id="submitButton"/>
                        </div>
                    </form>
                    <script t-att-src="urls['jquery']" type="text/javascript"></script>
                    <script t-att-src="urls['js_routes']" type="text/javascript"></script>
                    <script t-att-src="urls['observation_form_validation']" type="text/javascript"></script>
                    <script t-att-src="urls['observation_form_js']" type="text/javascript"></script>
                </div>
            </t>
        </template>


        <template name="Selection box input" t-name="mobile_frontend.observation_data_select">
           <div t-att-class="'block obsSelectField valHide' if item['initially_hidden']==True else 'block obsSelectField'" t-att-id="'parent_'+item['name']">
               <div class="input-header">
                   <label t-att-for="item['name']"><t t-esc="item['label']"/></label>
               </div>
               <div class="input-body">
                   <select t-att-id="item['name']" t-att-name="item['name']" t-att-class="'exclude' if item['initially_hidden']==True else ''">
                            <t t-if="item['initially_hidden']==False">
                                <option value="">Please Select</option>
                            </t>
                        <t t-foreach="item['selection_options']" t-as="option">
                            <option t-att-value="option['value']"><t t-esc="option['label']"/></option>
                        </t>
                   </select>
                   <span class="errors"><t t-esc="item['errors']"/></span>
                   <span class="help"><t t-esc="item['info']"/></span>
               </div>
           </div>
       </template>

        <template name="Input box" t-name="mobile_frontend.observation_data_input">
            <div t-att-class="'block obsField valHide' if item['initially_hidden']==True else 'block obsField'" t-att-id="'parent_' + item['name']">
                <div class="input-header">
                    <label t-att-for="item['name']"><t t-esc="item['label']"/></label>
                        <!-- <t t-if="item['target']">
                            <br/><span class="targetString">Target: <t t-esc="item['target']"/></span>
                        </t> -->

                    <!-- <t t-if="item['number']">-->
                        <input t-att-type="item['type']" t-att-name="item['name']" t-att-id="item['name']" t-att-min="item['min']" t-att-max="item['max']" t-att-step="item['step']" t-att-class="'exclude' if item['initially_hidden']==True else ''"/>
                    <!-- </t>
                    <t t-if="item['text']">
                        <input t-att-type="item['type']" t-att-name="item['name']" t-att-id="item['name']"/>
                    </t>  -->
                </div>
                <div class="input-body">
                    <span class="errors"><t t-esc="item['errors']"/></span>
                    <span class="help"><t t-esc="item['info']"/></span>
                </div>
            </div>
        </template>



        <template name="Error Screen" t-name="mobile_frontend.error">
            <t t-call="mobile_frontend.assets_new"/>
            <t t-call="mobile_frontend.logged_in_header"/>
            <t t-call="mobile_frontend.base">
                <div class="content">
                    <h1>Application Error</h1>
                    <p>There was an error while processing your request.</p>
                    <h3>Details</h3>
                    <p><t t-esc="error_string"></t></p>
                </div>
            </t>
            <t t-call="mobile_frontend.logged_in_footer"/>
        </template>

        <template t-name="mobile_frontend.patient" name="Patient screen">
            <t t-call="mobile_frontend.base">
                <div class="content">
                    <div class="block">
                        <a class="patientInfo" href="#" id="obsButton">
                            <h3 class="name" t-att-data-id="patient['id']">
                                <strong><t t-esc="patient['full_name']"/></strong><br/>
                                <t t-if="'parent_location' in patient">
                                    <t t-esc="patient['parent_location']"/>,
                                </t>
                                <t t-if="'location' in patient">
                                    <t t-esc="patient['location']"/>
                                </t>
                            </h3>
                            <h3 class="obs">Take observation</h3>
                        </a>
                        <ul class="two-col tabs">
                            <li><a href="#graph-content" class="selected">Graph</a></li>
                            <li><a href="#table-content">Table</a></li>
                        </ul>
                        <div id="graph-content"></div>
                        <div id="table-content"></div>
                    </div>
                    <script t-att-src="urls['jquery']" type="text/javascript"></script>
                    <script t-att-src="urls['js_routes']" type="text/javascript"></script>
                    <script t-att-src="urls['data_driven_documents']" type="text/javascript"></script>
                    <script t-att-src="urls['patient_graph']" type="text/javascript"></script>
                </div>
            </t>
        </template>



    </data>
</openerp>
