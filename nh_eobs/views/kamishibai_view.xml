<openerp>
    <data>
        <!--Kamishibai Search View-->
        <record model="ir.ui.view" id="view_kamishibai_search">
            <field name="name">Kamishibai Search View</field>
            <field name="model">nh.clinical.kamishibai</field>
            <field name="arch" type="xml">
                <search string="Kamishibai Search View">
                    <field name="ward_id" />
                    <group expand="1" string="Group By...">
                        <filter name="kamishibai" string="Kamishibai" domain="[]" context="{'group_by':'kamishibai_column'}" help="Kamishibai View"/>
                    </group>
                </search>
            </field>
        </record>
        <!-- Kamishibai Kanban View -->
        <record model="ir.ui.view" id="view_kamishibai_kanban">
            <field name="name">Kamishibai Kanban View</field>
            <field name="model">nh.clinical.kamishibai</field>
            <field name="arch" type="xml">
                <kanban edit="false" quick_create="false" create="false">
                    <field name="patient_id"/>
                    <field name="location_full_name"/>
                    <field name="status"/>
                    <field name="shift1_label"/>
                    <field name="shift2_label"/>
                    <field name="shift3_label"/>
                    <field name="kamishibai_column"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-att-class="'oe_kanban_card oe_kanban_global_click' + (record.status.raw_value == 'overdue' ? ' nhc_kanban_color_red' : '') + (record.status.raw_value == 'ok' ? ' nhc_kanban_color_green' : '')">
                                <div class="oe_kanban_content">
                                    <t t-if="record.kamishibai_column.raw_value == 's1'">
                                        <div><field name="shift1_label"/></div>
                                    </t>
                                    <t t-if="record.kamishibai_column.raw_value == 's2'">
                                        <div><field name="shift2_label"/></div>
                                    </t>
                                    <t t-if="record.kamishibai_column.raw_value == 's3'">
                                        <div><field name="shift3_label"/></div>
                                    </t>
                                    <div><b><field name="patient_id"/></b></div>
                                    <div><field name="location_full_name"/></div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_kamishibai">
            <field name="name">Kamishibai Board</field>
            <field name="res_model">nh.clinical.kamishibai</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban</field>
            <field name="context">{'search_default_kamishibai':1}</field>
            <field name="search_view_id" ref="view_kamishibai_search"/>
        </record>
        <record model="ir.actions.act_window.view" id="act_view_kamishibai_kanban">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_kamishibai_kanban"/>
            <field name="act_window_id" ref="action_kamishibai"/>
        </record>
    </data>
</openerp>